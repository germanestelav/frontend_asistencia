import{B as a,C as r}from"./index-Jc6aNIQy.js";const i=a("auth",{state:()=>({user:r.getCurrentUser(),token:r.getToken(),isAuthenticated:!!r.getToken()}),getters:{isDueno:e=>{var t;return((t=e.user)==null?void 0:t.rol)==="DUENO"},isTrabajador:e=>{var t;return((t=e.user)==null?void 0:t.rol)==="TRABAJADOR"},nombreCompleto:e=>e.user?`${e.user.nombre} ${e.user.apellido_paterno} ${e.user.apellido_materno}`:""},actions:{async login(e,t){var o,u;try{const s=await r.login(e,t);return this.token=s.access_token,this.user=s.usuario,this.isAuthenticated=!0,r.setAuth(s.access_token,s.usuario),{success:!0}}catch(s){return{success:!1,message:((u=(o=s.response)==null?void 0:o.data)==null?void 0:u.detail)||"Error al iniciar sesi√≥n"}}},logout(){r.logout(),this.user=null,this.token=null,this.isAuthenticated=!1}}});export{i as u};
